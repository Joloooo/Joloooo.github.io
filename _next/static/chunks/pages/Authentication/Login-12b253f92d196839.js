(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{8656:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Authentication/Login",function(){return t(8797)}])},8711:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>g});var o=t(4848),r=t(6540);let i=(0,r.createContext)(null);function l({clientId:e,nonce:n,onScriptLoadSuccess:t,onScriptLoadError:o,children:l}){let a=function(e={}){let{nonce:n,onScriptLoadSuccess:t,onScriptLoadError:o}=e,[i,l]=(0,r.useState)(!1),a=(0,r.useRef)(t);a.current=t;let s=(0,r.useRef)(o);return s.current=o,(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=n,e.onload=()=>{var e;l(!0),null===(e=a.current)||void 0===e||e.call(a)},e.onerror=()=>{var e;l(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[n]),i}({nonce:n,onScriptLoadSuccess:t,onScriptLoadError:o}),s=(0,r.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:a}),[e,a]);return r.createElement(i.Provider,{value:s},l)}let a={large:40,medium:32,small:20};function s({onSuccess:e,onError:n,useOneTap:t,promptMomentNotification:o,type:l="standard",theme:s="outline",size:c="large",text:u,shape:d,logo_alignment:g,width:p,locale:_,click_listener:v,containerProps:h,...m}){let f=(0,r.useRef)(null),{clientId:y,scriptLoadedSuccessfully:b}=function(){let e=(0,r.useContext)(i);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),w=(0,r.useRef)(e);w.current=e;let E=(0,r.useRef)(n);E.current=n;let x=(0,r.useRef)(o);return x.current=o,(0,r.useEffect)(()=>{var e,n,o,r,i,a,h,A,R;if(b)return null===(o=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===o||o.initialize({client_id:y,callback:e=>{var n,t;if(!(null==e?void 0:e.credential))return null===(n=E.current)||void 0===n?void 0:n.call(E);let{credential:o,select_by:r}=e;w.current({credential:o,clientId:null!==(t=null==e?void 0:e.clientId)&&void 0!==t?t:null==e?void 0:e.client_id,select_by:r})},...m}),null===(a=null===(i=null===(r=null==window?void 0:window.google)||void 0===r?void 0:r.accounts)||void 0===i?void 0:i.id)||void 0===a||a.renderButton(f.current,{type:l,theme:s,size:c,text:u,shape:d,logo_alignment:g,width:p,locale:_,click_listener:v}),t&&(null===(R=null===(A=null===(h=null==window?void 0:window.google)||void 0===h?void 0:h.accounts)||void 0===A?void 0:A.id)||void 0===R||R.prompt(x.current)),()=>{var e,n,o;t&&(null===(o=null===(n=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.accounts)||void 0===n?void 0:n.id)||void 0===o||o.cancel())}},[y,b,t,l,s,c,u,d,g,p,_]),r.createElement("div",{...h,ref:f,style:{height:a[c],...null==h?void 0:h.style}})}var c=t(5556),u=t.n(c);let d=e=>{let{onSuccess:n,onError:t}=e;return(0,o.jsx)(l,{clientId:"427179292131-6p4dkl1v9gjmmr2cf363d39a922vl3ri.apps.googleusercontent.com",children:(0,o.jsx)("div",{className:"google-auth",children:(0,o.jsx)(s,{onSuccess:n,onError:()=>t(Error("Google sign-in failed."))})})})};d.propTypes={onSuccess:u().func.isRequired,onError:u().func.isRequired};let g=d},8797:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>v});var o=t(4848),r=t(6540),i=t(9026),l=t(8711),a=t(1028),s=t(6715),c=t(1106),u=t.n(c),d=t(2218),g=t.n(d),p=t(1468),_=t(4523);let v=()=>{let{form:e,options:n}=a.ON,t=(0,s.useRouter)(),c=(0,p.wA)(),[d,v]=(0,r.useState)(""),h=async e=>{e.preventDefault(),v("");let n=Object.fromEntries(new FormData(e.target).entries());try{let{token:e,user:o}=(await i.A.post("/login",n)).data;localStorage.setItem("token",e),(0,i.R)(),c((0,_.iD)({token:e,user:o})),t.push("/")}catch(e){console.error("Login error:",e),v("Login failed. Please check your credentials.")}},m=async e=>{try{let{data:n}=await i.A.post("/api/auth/google",{token:e.credential});if(n.success){let{token:e,user:o}=n;localStorage.setItem("token",e),(0,i.R)(),c((0,_.iD)({token:e,user:o})),t.push("/")}else console.error("Login failed:",n.message),v("Login failed. Please try again.")}catch(e){if(function(e){return"object"==typeof e&&null!==e&&"response"in e&&"message"in e}(e)){var n;console.error("Error during Google sign-in:",(null===(n=e.response)||void 0===n?void 0:n.data)||e.message),v("Google Sign-In failed. Please try again.")}else e instanceof Error?(console.error("Error during Google sign-in:",e.message),v("Google Sign-In failed. Please try again.")):(console.error("Unexpected error:",e),v("An unexpected error occurred."))}};return(0,o.jsxs)("div",{className:g()["login-container"],children:[(0,o.jsxs)("form",{onSubmit:h,children:[e.inputs.map((e,n)=>(0,o.jsx)("div",{className:g()["input-group"],children:(0,o.jsx)("input",{type:e.type,id:e.id,placeholder:e.placeholder,name:e.name,required:e.required,className:g().input})},n)),(0,o.jsx)("button",{type:e.submitButton.type,className:g()[e.submitButton.className],children:e.submitButton.text})]}),(0,o.jsx)("div",{className:g().options,children:n.map((e,n)=>(0,o.jsx)(u(),{href:e.href,className:g()[e.className],children:e.text},n))}),(0,o.jsx)("div",{className:g()["google-auth-container"],children:(0,o.jsx)(l.default,{onSuccess:m,onError:e=>{e instanceof Error?(console.error("Login Failed:",e.message),v("Google Sign-In failed. Please try again.")):(console.error("Unexpected error:",e),v("An unexpected error occurred."))}})}),d&&(0,o.jsx)("div",{className:g()["error-message"],children:d})]})}},2218:e=>{e.exports={"login-container":"Authentication_login-container__T7TTN","password-recovery-container":"Authentication_password-recovery-container__V2FyD","input-group":"Authentication_input-group__6bVlM","back-button-and-heading":"Authentication_back-button-and-heading__5MuJX","back-icon":"Authentication_back-icon__Fk7Z_","login-btn":"Authentication_login-btn__Bl1Xj","submit-btn":"Authentication_submit-btn__PZDJ4",options:"Authentication_options__3WDUQ","register-container":"Authentication_register-container__1B83Y","input-group-row":"Authentication_input-group-row__i78WI","input-field":"Authentication_input-field__nlaR6","register-btn":"Authentication_register-btn__xD6E0","Register-options":"Authentication_Register-options___KXuS","login-account":"Authentication_login-account__yR37V","google-auth-container":"Authentication_google-auth-container__VEpE3","error-message":"Authentication_error-message__HVY3V","success-message":"Authentication_success-message__vGOVv"}},2694:(e,n,t)=>{"use strict";var o=t(6925);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,n,t,r,i,l){if(l!==o){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:r};return t.PropTypes=t,t}},5556:(e,n,t)=>{e.exports=t(2694)()},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e=>{var n=n=>e(e.s=n);e.O(0,[636,593,792],()=>n(8656)),_N_E=e.O()}]);